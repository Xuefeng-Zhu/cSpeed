<!doctype html>
<html lang="en" ng-app="myApp">
  <head>
    <meta charset="utf-8">
    <title>cSpeed</title>
    <link rel="stylesheet" href="css/semantic.css"/>
    <link rel="stylesheet" href="css/pacer-theme.css"/>
    <link rel="stylesheet" href="css/app.css"/>
  </head>
  <body id="example" ng-controller="TimerCtrl" ng-cloak>
    <!-- Information about test -->
    <div ng-include="'partials/introduction.html'" ng-hide="report.summary"></div>
    <!-- End of Info -->
    <!-- Loading icon -->
    <div ng-show="currentTest" class="pace pace-active"><div class="pace-progress" data-progress="50" data-progress-text="50%" style="width: 50%;"><div class="pace-progress-inner"></div></div><div class="pace-activity"></div></div>
    <!-- End of Loading icon -->
    <div class="container">
      <!-- Test report -->
      <div class="fx-zoom-normal fx-easing-sine fx-speed-500" ng-show="report.summary">
        <div class="item">
          <div class="content">
            <!-- Grade  -->
            <div class="ui grid">
              <div class="four wide column">
                <div style="text-align: center; font-size: 9em" ng-style="{
                  color: grades[report.grade].color
                  }">
                  {{grades[report.grade].letter}}
                </div>
              </div>
              <div class="twelve wide column">
                <div class="ui segment">
                  <h2>{{grades[report.grade].comment}}</h2>
                </div>
              </div>
            </div>
            <!-- End of Grade -->
            <div style="text-align:center; margin-bottom:10px; font-size:1.5em">
              <div class="ui segment">
                <p>Your load time is <b>{{report.summary.comparation.value}}% {{report.summary.comparation.key}}</b> than typical users, and
                <b>{{report.region.comparation.value}}% {{report.region.comparation.key}}</b> than the typical user in {{userCity}}.</p>
                <div id="chart_total"></div>
              </div>
            </div>
            <div style="text-align:center; font-size:1.5em">
              <div class="ui segment" ng-show="region.count>1">
                <p>The fastest ISP in your city is {{report.region.fastest}}. The typical {{report.region.fastest}} user is {{report.region.fastestComparation.value}}% faster than you.</p>
                <div id="chart_isp"></div>
              </div>
              <div class="ui huge warning message" ng-hide="region.count>1">
                <p>Not enough users in your city</p>
              </div>
            </div>
            <!-- Feedback -->
            <div class="ui form segment">
              <h2 class="ui header">Feedback</h2>
              <div class="three fields">
                <div class="field">
                  <label>City</label>
                  <input placeholder="City" type="text" ng-model="fb.city">
                </div>
                <div class="field">
                  <label>State</label>
                  <input placeholder="State" type="text" ng-model="fb.region">
                </div>
                <div class="field">
                  <label>Country</label>
                  <input placeholder="Country" type="text" ng-model="fb.country">
                </div>
              </div>
              <div class="three fields">
                <div class="field">
                  <label>Network</label>
                  <div class="ui fluid selection dropdown">
                    <div class="text">Network</div>
                    <i class="dropdown icon"></i>
                    <input type="hidden" name="network">
                    <div class="menu">
                      <div class="item" data-value="wire">Wire</div>
                      <div class="item" data-value="wifi">Wifi</div>
                    </div>
                  </div>
                </div>
                <div class="field">
                  <label>Cost of Data Plan</label>
                  <input placeholder="Cost of Data Plan" type="text" ng-model="fb.cost">
                </div>
                <div class="field">
                  <label>Advertised Speed</label>
                  <input placeholder="Advertised Speed" type="text" ng-model="fb.speed">
                </div>
              </div>
              <div class="field">
                <label>Comments</label>
                <textarea ng-model="fb.comments"></textarea>
              </div>
              <div class="ui large black submit button" ng-click="submitFeedback()">Submit</div>
            </div>
            <!-- End of feedback -->
            <div class="">
              <div class="ui large black button" style="width:49%" ng-show="history" ng-click="showHistory()">View Previous Test Results</div>
              <div class="ui large black button" style="width:50%" ng-click="startTest()">{{status}}</div>
            </div>
          </div>
        </div>
      </div>
      <!-- End of test Report -->
      <!-- Individual result -->
      
      <div class="test fx-fade-down fx-easing-sine fx-speed-1000" style="cursor: pointer" ng-repeat="test in finishedTest" ng-click="selectTest(test)">
        <span style="position:relative; bottom:0.6em; float: left;"><b>{{test.name}}</b></span>
        <div class="number-pb" style="left:4em">
          <!-- User test -->
          <div class="number-pb-shown" style="width: {{test.time / 150}}%; overflow: visible; box-sizing: content-box; min-width: 0px; max-width: none; height: 10px; min-height: 0px; max-height: none; padding-left: 0px;"></div>
          <div class="number-pb-num" style="left: {{test.time / 150 - 1.1}}%; overflow: visible; box-sizing: content-box; width: 20px; min-width: 20px; max-width: none; height: 19px; min-height: 0px; max-height: none; padding-left: 5px;z-index: 200;" ng-hide="test.time >= 15000">{{test.time/1000|number: 1}}s</div>
          <div class="number-pb-num" style="left: 96%; overflow: visible; box-sizing: content-box; width: 50px; min-width: 20px; max-width: none; height: 19px; min-height: 0px; max-height: none; padding-left: 5px;z-index: 200;" ng-show="test.time >= 15000">Time out</div>
          <!-- End of user test -->
          <!-- Other test -->
          <div class="number-pb-shown" style="width: 1%; left: {{total[test.name] / 150}}%;overflow: visible; box-sizing: content-box; min-width: 0px; max-width: none; height: 10px; min-height: 0px; max-height: none; padding-left: 0px;background-color: red;z-index: 100;"></div>
          <div class="number-pb-num" style="left: {{total[test.name] / 150 - 2}}%; overflow: visible; box-sizing: content-box; width: 80px; min-width: 20px; max-width: none; height: 19px; min-height: 0px; max-height: none; padding-left: 5px;z-index: 200;" ng-show="absDiff(total[test.name], test.time)">avg: {{total[test.name]/1000|number: 1}}s</div>
          <!-- End of other test -->
        </div>
        <div class="ui compact pointing menu" ng-show="test==selectedTest">
          <a class="item" href={{test.link}} target="_blank">
            <i class="url icon"></i> Acess Website
          </a>
          <a class="item" ng-click="showResource(test)">
            <i class="tasks icon"></i> View Timeline
          </a>
          <a class="item" ng-click="showResource(test)">
            <i class="signal icon"></i> Take <b style="color:red">{{test.speed|number:1}}</b>ms Speed of Light to transmit
          </a>
        </div>
      </div>
      <!-- End of Individual result -->
    </div>
    <ng-include src="modal"></ng-include>
    <script src="lib/jquery-1.11.1.min.js"></script>
    <script src="lib/jsapi.js"></script>
    <script src="lib/store.min.js"></script>
    <script src="lib/semantic.min.js"></script>
    <script src="lib/TweenMax.min.js"></script>
    <script src="lib/firebase.js"></script>
    <script src="lib/purl.js"></script>
    <script src="lib/jslitmus.js"></script>
    <script src="lib/angular/angular.js"></script>
    <script src="lib/angular/angular-route.js"></script>
    <script src="lib/angular/angular-animate.js"></script>
    <script src="lib/timer.js"></script>
    <script src="lib/ng-Fx.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>
  </body>
</html>